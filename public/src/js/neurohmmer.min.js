$(document).ready(function(){"use strict";checkCollapseState(),keepFooterFixedToBottom(),addSeqValidation(),inputValidation(),$(document).bind("keydown",function(e){e.ctrlKey&&13===e.keyCode&&$("#input").trigger("submit")})});var checkCollapseState=function(){"use strict";if($.cookie("NeuroHmmer_adv_params_status")){var e=$.cookie("NeuroHmmer_adv_params_status");if("open"===e){var t=document.getElementById("adv_params_btn");t.innerHTML='<i class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;Hide Advanced Parameters',$("#adv_params").addClass("in")}}},keepFooterFixedToBottom=function(){"use strict";$("#mainbody").css({"margin-bottom":$("#footer").height()+15+"px"}),$(window).resize(function(){$("#mainbody").css({"margin-bottom":$("#footer").height()+15+"px"})})},addSeqValidation=function(){"use strict";jQuery.validator.addMethod("checkInputType",function(e,t){var n=[],r="";if(">"===e.charAt(0)){for(var a=e.split(">"),o=1;o<a.length;o++){var i=a[o].split("\n");if(0!==i.length){var s=jQuery.grep(i,function(e){return e});if(0!==s.length){s.shift();var c=s.join("");if(r=checkType(c,.9),n.push(r),"protein"!==r&&"dna"!==r&&"rna"!==r)return!1}}}for(var u=n[0],p=0;p<n.length;p++)if(n[p]!==u)return!1;return!0}return r=checkType(e,.9),"protein"!==r&&"dna"!==r&&"rna"!==r?!1:!0},"* The Input must be either DNA or protein sequence(s). Please ensure that your sequences do not contains any non-letter character(s). If there are multiple sequences, ensure that they are all of one type. ")},inputValidation=function(){"use strict";var e=$("#seq").attr("data-maxCharacters");$("#input").validate({rules:{seq:{minlength:5,required:!0,checkInputType:!0,maxlength:e},"neuropeptides[]":{required:!0}},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){if("validations_group"===t.parent().parent().attr("id")){var n=document.getElementById("lastValidation");e.insertAfter(n)}else t.parent(".input-group").length?e.insertAfter(t.parent()):e.insertAfter(t)},submitHandler:function(e){$("#spinner").modal({backdrop:"static",keyboard:"false"}),ajaxFunction()}})},ajaxFunction=function(){"use strict";$.ajax({type:"POST",url:$("#input").attr("action"),data:$("#input").serialize(),success:function(e){$("#results_box").show(),$("#output").html(e),$("#mainbody").css({"background-color":"#fff"}),$("#search").css({"background-color":"#F5F5F5"}),$("#results").css({"border-top":"3px solid #DBDBDB"}),$("#search").css({"margin-bottom":"0"}),$("#spinner").modal("hide")},error:function(e,t){var n;500==e.status||400==e.status?(n=e.responseText,$("#results_box").show(),$("#output").html(n),$("#spinner").modal("hide")):(n=e.responseText,$("#results_box").show(),$("#output").html("There seems to be an unidentified Error."),$("#spinner").modal("hide"))}})},changeAdvParamsBtnText=function(){"use strict";var e=document.getElementById("adv_params_btn");'<i class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;Show Advanced Parameters'===e.innerHTML?(e.innerHTML='<i class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;Hide Advanced Parameters',$("#adv_params").collapse("show"),$.cookie("NeuroHmmer_adv_params_status","open")):(e.innerHTML='<i class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;Show Advanced Parameters',$("#adv_params").collapse("hide"),$.cookie("NeuroHmmer_adv_params_status","closed"))},examplarSequences=function(){"use strict";var e=">gi|752421898|ref|XP_011230170.1| PREDICTED: glucagon [Ailuropoda melanoleuca]\nMKSIYFVAGLFVMLVQGSWQRSLQDTEEKSRSLPAPQTDPLNDPDQMNEDKRHSQGTFTSDYSKYLDSRRAQDFVQWLMSTKRNKNNIAKRHDEFERHAEGTFTSDVSSYLEGQAAKEFIAWLVKGRGRRDFPEEVAIVEELRRRHADGSFSDEMNTVLDDLATRDFINWLLQTKITER\n>gi|328711854|ref|XP_003244660.1| PREDICTED: uncharacterized protein LOC100571180 [Acyrthosiphon pisum]\nMVKIGLPWLLLVLMKLTNREIKSDEIISIQEVYDICQAEPNTDICDLLEKSSSLVDLNKLDSPEKRRQKTVFSSWGGKRQSTYPYGGKRPAFSSWGGKRASDKHGRPKQTFSSWGGKRSDYDGYDNGEMDEHQMDKRELNGIKQDKNNYRNKMTKGIHALFTIFSDWSRDPEEKKGIRYAGIKSMRRSSDFFPWGGKRFTGDAK\n>gi|301771746|ref|XP_002921293.1| PREDICTED: thyrotropin releasing hormone [Ailuropoda melanoleuca]\nMPGPWLQLAMALTLTVAGIPGGRAQPEVAQQEAAMAPERAGLDDLLRQAQRLLFLREDLQRLRGNQGDLESEAQILQPDWLSKRQHPGKREGEAEEGVEEEEEEGGAVGPHKRQHPGRQEDVAAWSDVTLQKRQHPGRRAPLLGYAFTKRQHPGRRLVDSKAQRSWEAEEEDGEEEGGEPMPEKRQHPGKRALGSPCGPGAACGQASLLLGLLDDLSRGQGAEEKRQHPGRRAAWAREPLEE\n>gi|328710353|ref|XP_003244236.1| PREDICTED: uncharacterized protein LOC100573178 [Acyrthosiphon pisum]\nMTMSVTITILCILGSTFLLIMPDNTTASDKFFQTGGRFGKRHDEHIPDIRYAAMVKTRSVDNVPPRIERGFYISRYGKRSTNSITDPYYFTLCLPSYGIYCDFTGLPNLLRCKRIQPGACSNLNYVNEKTQMKPDNDIII\n>gi|641659926|ref|XP_008181304.1| PREDICTED: uncharacterized protein LOC100570556 isoform X2 [Acyrthosiphon pisum]\nMHKFFVQIYIFVLIIWAVEKSDCKQGACLNYGHSCWGAHGKRNVPNDLDSLIRYRMAVFKKSGHRDSFINPNADQSQEDIPNYYNIFKHYSKINSVKTNNDDTVDTWSLEPSNNLPSGGSYYEDQVLDPRIEYKIMKI\n>gi|328717573|ref|XP_003246245.1| PREDICTED: uncharacterized protein LOC100568735 [Acyrthosiphon pisum]\nMPHKINVGLVALAALAAAVLADPSVDRRASMGFMGMRGKKDRDQGGGGSGGDETSAAVDLDKRTMVFRRPMFDGGSRPAVFGGGSAEGFKRASMGFMGMRGKKDYYSNNKGSAAGFFGMRGKKVPSADAFYGVRGKKWPDHEDAVDADVQLSPIYILYRIIDELKSELSDRERNLVAAKFDEEREMR\n";document.getElementById("seq").value=e},checkType=function(e,t,n,r){"use strict";void 0===t&&(t=.9),void 0===n&&(n=1e4),void 0===r&&(r=1);var a=e.slice(r-1,n),o=a.replace(/N/gi,""),i=o.length,s=(o.match(/[ACG]/gi)||[]).length/i,c=(o.match(/[T]/gi)||[]).length/i,u=(o.match(/[U]/gi)||[]).length/i,p=a.replace(/X/gi,""),G=p.length,d=(a.match(/[ARNDCQEGHILKMFPSTWYV\*]/gi)||[]).length/G;return s+c>=t||s+u>=t?c>=u?"dna":u>=c?"rna":"dna":d>=t?"protein":void 0};